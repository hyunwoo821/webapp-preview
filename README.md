# 경력수정 프로토타입

## 프로젝트 개요
- **이름**: 경력수정 프로토타입 (Career Modification Wizard)
- **목표**: 건설업 경력 수정 신청 프로세스를 단계별 위저드 형태로 구현한 웹 애플리케이션
- **주요 기능**:
  - 5단계 위저드 UI (수정항목 선택 → 경력 선택 → 수정사항 입력 → 서류 업로드 → 제출)
  - 엑셀 데이터 기반 동적 폼 생성
  - 규칙 기반 자동 처리유형 결정
  - 필수서류 자동 안내
  - 로컬 스토리지 기반 데이터 저장

## URL
- **개발 서버**: https://3000-ikshpae439pb9767pmc6m-5634da27.sandbox.novita.ai
- **GitHub**: (추후 배포 예정)

## 데이터 아키텍처

### 데이터 모델
1. **표1 (수정항목 마스터)**
   - 항목코드 (F01~F18)
   - 항목명 (입사일(수정), 퇴사일(수정) 등)
   - 총 18개 항목

2. **표2 (규칙 및 처리유형)**
   - 케이스ID (C1201~C1210)
   - 항목코드, 비교값1~4
   - 조건식
   - 처리유형결정 (단순/심의)
   - 필수서류1~4
   - 총 10개 규칙

3. **표3 (경력 데이터)**
   - 케이스ID
   - 근무처명, 입사일, 퇴사일 등 25개 필드
   - 총 10개 경력 샘플

### 스토리지
- **클라이언트 사이드**: 
  - JSON 데이터 (`/data.json`)
  - 로컬 스토리지 (제출 데이터 임시 저장)
- **서버 사이드**: Cloudflare Pages/Workers (정적 파일 제공)

### 데이터 플로우
```
엑셀 파일 → Python 파싱 → JSON 변환 → public/data.json
                                         ↓
사용자 선택 → 프론트엔드 처리 → 규칙 매칭 → 로컬스토리지 저장
```

## 사용자 가이드

### 기본 사용 방법
1. **Step 1: 수정항목 선택**
   - 18개 항목 중 수정할 항목을 체크박스로 선택 (복수 선택 가능)
   - 예: "입사일(수정)", "직무분야/전문분야(수정)" 등

2. **Step 2: 경력 선택**
   - 기존에 신고된 경력 목록에서 수정할 경력 1건 선택
   - 각 경력의 상세 정보(근무처명, 입사일, 참여사업명 등) 확인 가능

3. **Step 3: 수정사항 입력**
   - 좌측: 기존 신고 내용 표시
   - 우측: 선택한 항목만 입력 가능하도록 활성화
   - "수정 내용 저장" 버튼 클릭

4. **Step 4: 서류 업로드**
   - 자동으로 결정된 처리유형(단순/심의) 확인
   - 필수서류 목록 확인 및 파일 업로드
   - (프로토타입에서는 업로드 없이도 진행 가능)

5. **Step 5: 제출 확인**
   - 수정 내용 요약 확인
   - "제출" 버튼 클릭 시 로컬 스토리지에 저장
   - 제출 완료 모달 표시

### 주요 기능
- **반응형 디자인**: 모바일, 태블릿, 데스크톱 대응
- **실시간 검증**: 각 단계별 필수 입력 검증
- **규칙 기반 자동화**: 수정 내용에 따라 자동으로 처리유형 및 필수서류 안내
- **데이터 보존**: 브라우저 로컬 스토리지에 제출 데이터 저장

## 기술 스택
- **백엔드**: Hono (v4.11.7)
- **프론트엔드**: 
  - Vanilla JavaScript (ES6+)
  - Tailwind CSS (CDN)
  - Font Awesome 6.4.0
  - Axios 1.6.0
- **빌드 도구**: Vite 6.3.5
- **배포**: Cloudflare Pages/Workers
- **프로세스 관리**: PM2 (개발 환경)

## 프로젝트 구조
```
webapp/
├── src/
│   ├── index.tsx           # Hono 앱 메인 진입점
│   └── renderer.tsx        # 렌더러 설정
├── public/
│   ├── data.json           # 엑셀에서 변환된 데이터
│   └── static/
│       ├── app.js          # 프론트엔드 로직
│       └── style.css       # 커스텀 스타일
├── dist/                   # 빌드 결과물
├── ecosystem.config.cjs    # PM2 설정
├── package.json
├── vite.config.ts
└── wrangler.jsonc
```

## 로컬 개발 환경 설정

### 필수 요구사항
- Node.js 18+
- npm 또는 pnpm

### 설치 및 실행
```bash
# 의존성 설치
npm install

# 빌드
npm run build

# 개발 서버 시작 (PM2)
pm2 start ecosystem.config.cjs

# 또는 직접 실행
npm run dev:sandbox

# 서비스 상태 확인
pm2 list

# 로그 확인
pm2 logs webapp --nostream
```

### 포트 정리
```bash
npm run clean-port
# 또는
fuser -k 3000/tcp
```

## 배포

### Cloudflare Pages 배포
```bash
# 빌드 및 배포
npm run deploy

# 프로덕션 배포
npm run deploy:prod
```

## 완료된 기능
✅ Step 1: 수정항목 선택 (체크박스 기반 복수 선택)
✅ Step 2: 경력 선택 (라디오 버튼 스타일 선택)
✅ Step 3: 수정사항 입력 (좌우 분할 레이아웃, 선택 항목만 활성화)
✅ Step 4: 서류 업로드 (드래그앤드롭 지원, 파일명 표시)
✅ Step 5: 제출 확인 (요약 화면, 로컬 스토리지 저장)
✅ 규칙 기반 처리유형 자동 결정
✅ 필수서류 자동 안내
✅ 단계별 진행 상태 표시 (Stepper UI)
✅ 반응형 디자인

## 향후 개발 계획
- [ ] 백엔드 API 연동 (실제 서버 저장)
- [ ] 담당자 화면 구현 (심사/승인 기능)
- [ ] 조건식 파서 고도화 (표2의 복잡한 조건식 정확한 평가)
- [ ] 파일 업로드 실제 구현 (서버 저장)
- [ ] 사용자 인증/권한 관리
- [ ] 알림 기능 (이메일/SMS)
- [ ] 히스토리 조회 기능

## 개발 노트

### 핵심 구현 사항
1. **위저드 패턴**: 5단계 선형 프로세스로 복잡한 입력 과정 단순화
2. **상태 관리**: 전역 `state` 객체로 단계 간 데이터 공유
3. **동적 렌더링**: 선택한 항목에 따라 UI 동적 생성
4. **규칙 엔진**: 표2의 조건식을 기반으로 처리유형 자동 결정
5. **데이터 검증**: 각 단계별 필수 입력 검증

### 알려진 제한사항
- 조건식 평가가 단순화되어 있음 (케이스ID 기반 매칭)
- 파일 업로드는 클라이언트 메모리에만 저장
- 다중 사용자 동시 처리 미지원 (프로토타입)

## 라이선스
프로토타입 프로젝트 (상업적 사용 제한)

## 마지막 업데이트
- **날짜**: 2026-02-05
- **버전**: 1.0.0 (프로토타입)
- **상태**: ✅ 개발 완료 및 테스트 완료
